<!-- GNU TERRY PRATCHETT -->

<!-- GNU TERRY PRATCHETT -->

<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8" />
  <title>NER-Annotateur-Quenya</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
<!-- Navbar √† gauche -->
  <div class="navbar">
      <a href="quenya.html">Extraction NER</a>
      <a href="pipeline_spacy.html">Pipepline Spacy</a>
      <a href="blstm_crf.html">BSLTM CRF</a>
      <a href="methodologie.html">M√©thodologie</a>
      <a href="sources.html">Sources</a>
  </div>

<!--Conteneur principal -->
  <div class="main-content">
    <div class="blurred-content">

      <h1 border= 5px solid #3498db >M√©thodologie</h1>

        <p>
        Cette page recense les √©tapes du projet et les interrogations qu'elles ont pu soulever, ainsi que les solutions ou arbitrages que nous avons appliqu√©s.
        </p>

        <h2> √âtape 0 : le sujet </h2>

        <p>
        <b>Pourquoi, mais pourquoi le Quenya ?!</b> La question est l√©gitime. La r√©ponse peut se r√©sumer en trois arguments :
          <ul>
            <li> Pourquoi pas ? üòé </li>
            <li> <i>"C'est bien plus beau lorsque c'est inutile"</i> (Cyrano de Bergenac)</li>
            <li> Dans les mots du traducteur de la bible en Quenya √† qui ce projet doit beaucoup (Helge Fauskanger), le d√©sir de contribuer √† <i>"the ultimate literary monument of Nerddom"</i></li>
          </ul>
        </p>

        Nous voulions de plus travailler ensemble sur un projet car notre derni√®re collaboration remontait au M1. Notre s√©paration (Pauline en Alternance et Alix et Kehina en R&D) √©tait d√©chirante et nous voulions nous retrouver. 
        Poline a propos√© de travailler sur une langue fictive, Kehina l'a soutenue et Alix a suivi. Nos appels pour constituer le corpus consistaient en Kehina entrain d'essayer de scrapper TolkienGetaway, Alix qui essayait de comprendre ce qu'√©tait le Silmarillio et Peauline qui sortait sa grammaire en elfique.

        </p>
        <b>Pourquoi la reconnaissance d'entit√©s nomm√©es ?</b>
        <ul><li>Par curiosit√© pure, c'est une t√¢che que nous n'avions pas encore eu l'occasion d'effectuer.</li></ul>
        </p>

        <p>Nous avions envisag√© trois pistes :
        <ul><li>Utiliser la pipeline spacy pour NER</li>
        <li>Reproduire la d√©marche NER avec un BLSTM CRF pr√©sent√©e dans <a href="https://aclanthology.org/P16-1101/">cet article</a></li>
        </ul>

      <h2> √âtape 1 : Constitution du corpus </h2>

        <p>
        Le quenya dispose de son propre alphabet : le <i>Tengwar</i>. Cependant, pour des soucis de simplicit√©, nous nous sommes concentr√©es sur les textes en quenya en √©criture latinis√©e, qui comprends les 26 lettres de l'alphabet latin et deux diacritiques par voyelles (√´, √©).
        </p>

        <p>
        Le premier obstacle du projet a √©t√© la constitution du corpus. Apr√®s de rapide recherches sur <i>Huggingface</i> et <i>Kaggle</i>, nous n'avons trouv√© aucun corpus authentique (et les corpus annonc√©s comme g√©n√©r√©s par IA √©taient souvent vides.). Il a donc fallu <b>constituer notre propre corpus de z√©ro</b>. Heureusement pour nous, la communaut√© de fan du Seigneur des Anneaux est active sur internet. Nous avons pu assez rapidement trouver les principaux textes de quenya √©crits par Tolkien.
        </p>

        <p>
        Une fois ces textes r√©unis, nous avons √©t√© confront√©es √† un second probl√®me : le corpus obtenu √©tait tr√®s petit (et probablement <i>trop</i> petit pour un entrainement avec r√©seaux de neurones). De plus, un texte en quenya pouvait tr√®s bien ne pas contenir d'entit√©s nomm√©es. Il s'agissait donc de trouver des sources suppl√©mentaires ou d'augmenter les donn√©es. Nous avons donc opt√© en priorit√© pour ajouter de nouveaux textes. Ces textes n'ont pas √©t√© √©crits par Tolkien, et sont parfois consid√©r√©s comme du "n√©o-quenya" : des textes en quenya, suivant au plus pr√®s les r√®gles d√©finies par Tolkien, n'ayant pas √©t√© √©crits par Tolkien. Les textes ajout√©s sont un m√©lange de textes √©crits directement en quenya et de traductions de textes anglais vers le quenya (Silmarillion, Bible). Cette d√©cision a permis d'augmenter consid√©rablement la taille du corpus, mais reste un pari : aucun auteur n'√©tait <i>"natif"</i> du quenya, il est probable que ces nouveaux textes ont ajout√© de la variation qui n'√©tait potentiellement pas pr√©sente dans la langue telle qu'imagin√©e par Tolkien.
        </p>

        <p>
        Une autre source de variation au sein du corpus est la diversit√© des genres des textes rassembl√©s : la po√©sie versifi√©e cohabite avec la prose et les traductions de textes dont la syntaxe n'est pas contemporaine (traduction des textes bibliques). On observe notamment des diff√©rences importantes entre les textes en termes de taille et de ponctuation.
        </p>

        <p>
        En definitive, le corpus total repr√©sente 13 166 tokens dans 185 textes :
          <ul>
            <li>22 textes √©crits par Tolkien</li>
            <li>40 textes de n√©o-quenya non bibliques</li>
            <li>123 textes de n√©o-quenya issus de la traduction de la bible (13 premiers chapitres de l'√©vangile de Matthieu. Ces textes ont √©t√© divis√©s en suivant les retours √† la ligne afin d'√©viter d'avoir 13 textes beaucoup plus longs que tous les autres.)</li>
          </ul>
        </p>

        <u>Mentions l√©gales :</u>

        <p>
        Les textes en n√©o-quenya utilis√©s pour l'entra√Ænement et l'√©valuation des mod√®les sont prot√©g√©s par les droits d'auteur de leurs cr√©ateurs, √† l'exception de ceux dont les ≈ìuvres sont tomb√©es dans le domaine public. Les ≈ìuvres de John Ronald Reuel Tolkien et de Christopher Tolkien sont soumises aux droits d'auteur de leurs auteurs et/ou des d√©tenteurs de droits actuels, y compris leurs √©diteurs et le Tolkien Estate.
        </p>
        <p>
        Certains auteurs, comme Helge K√•re Fauskanger, qui a traduit des extraits de la Bible en n√©o-quenya, autorisent explicitement l'utilisation de leurs ≈ìuvres √† des fins de recherche, √† condition d'√™tre cit√©s dans les travaux qui utilisent leurs traductions.
        <p>
        <p>
        Les textes et contenus pr√©sents sur les sites Tolkien Gateway et Fandom: Lord of the Rings sont r√©gis par la licence Creative Commons Attribution-ShareAlike, qui permet la copie et la reproduction sous certaines conditions : il est n√©cessaire de fournir un lien vers la licence et d'indiquer toute modification apport√©e aux donn√©es. Si les donn√©es sont modifi√©es ou si un projet en d√©coule, les contributions doivent √™tre distribu√©es sous la m√™me licence que les sources originales.
        </p>
        <p>
        Les mod√®les entra√Æn√©s et l'outil d√©velopp√© √† cette occasion ne sont pas destin√©s √† un usage commercial.
        </p>

      <h2> Etape 2 : Annoter le corpus </h2>

        <p>
        La t√¢che de reconnaissance des entit√©s nomm√©es n√©cessite un entrainement sur un corpus annot√©. Il a donc fallut annoter les entit√©s nomm√©es. En raison de la lourdeur de la t√¢che, nous avons d√©cid√© d'annoter uniquement deux grandes cat√©gories : les personnes et les lieux.
        </p>

        <p>
        Cette annotation a √©t√© automatis√©e lorsque cela a √©t√© possible, mais il a dans certains cas fallu proc√©der √† l'intervention humaine. Nous avons cherch√© √† constituer une liste des entit√©s pr√©sente. Cela a √©t√© fait de 2 fa√ßons :
          <ul>
            <li>Nous avons scrap√© lorsque cela √©tait possible les sites de fan qui recensaient les personnages et les lieux de l'univers de Tolkien en quenya. Pour certains sites, cela a cependant √©t√© impossible en raison de s√©curit√©s antiscrapping (et ce m√™me en passant par des proxis et des agents).</li>
            <li>Pour les textes bibliques (seuls textes ne faisant pas partie de l'univers de Tolkien), il a fallu relever √† la main les formes nominatives des personnes et des lieux en s'appuyant sur la comparaison avec le texte anglais et la segmentation fournie par l'existence des versets.</li>
          </ul>
        </p>

        <p>
        Une fois les entit√©s r√©cup√©r√©es, il a fallu g√©n√©rer l'ensemble des cas possibles pour chacune d'entre elles. En effet, le quenya est une langue flexionnelle pr√©sentant entre 8 (late quenya) et 9 (early quenya) cas marqu√©s au singulier : Nominatif, (Accusatif - identique au Nominatif en late quenya, et identique pour les noms se terminant par une consonne), datif, g√©nitif, possessif, allatif, ablatif, locatif et instrumental. La langue pr√©sente √©galement des d√©sinences pour le duel et le pluriel (plus de 2), cependant celles-ci ne sont pas n√©cessaires pour les entit√©s nomm√©es qui sont en √©crasante majorit√© des noms propres singuliers. En nous basant sur deux grammaires :
          <ul>
            <li>Le haut elfique pour les d√©butants, Edouard Kloczko, POCKET, 2015</li>
            <li>Le <i>Quenya Course</i> (https://folk.uib.no/hnohf/qcourse.htm) </li>
          </ul>
        </p>

        <p>
        Le <i>Quenya Course</i> constitue une grammaire sous forme de r√©organisation des √©crits de Tolkien en quenya et sur le quenya. Il a √©galement √©t√© traduit dans plusieurs langues et semble s'imposer comme la r√©f√©rence mise en avant sur la plupart des sites de fans. Lorsque les deux grammaires √©taient en d√©saccord, nous avons pr√©f√©r√© nous appuyer sur cette derni√®re puisqu'elle semblait √™tre la source la plus r√©pandue et que son auteur, traducteur de la bible en quenya, √©tait responsable d'une partie non n√©gligeable de notre corpus.
        </p>

        <p>
        En nous appuyant sur les cas d√©crits dans les deux grammaires, nous avons pour chaque entit√© proc√©d√© √† la g√©n√©ration de tous les cas potentiels, et utilis√© cette liste des entit√©s d√©clin√©es comme base pour annoter notre corpus.
        </p>

        <p>
        Pour exemple, le nominatif du lieu <i>N√∫menor</i> a √©t√© d√©clin√© de la fa√ßon suivante :
          <ul>
            <li><b>Nominatif/Accusatif</b> : N√∫menor</li>
            <li><b>Datif</b> : N√∫menoren</li>
            <li><b>G√©nitif</b> : N√∫menoro</li>
            <li><b>Possessif</b> : N√∫menorwa</li>
            <li><b>Ablatif</b> : N√∫menorello</li>
            <li><b>Instrumental</b> : N√∫menorenen</li>
            <li><b>Allatif</b> : N√∫menorenna</li>
            <li><b>Locatif</b> : N√∫menoresse/N√∫menoress√´ (<i>The Quenya Course</i> note que Tolkien √©tait assez coh√©rent dans son habitude de pr√©f√©rer "√´" √† "e" en position finale, faisant l'hypoth√®se qu'il s'agissait d'indiquer √† des locuteurs anglophone une voyelle non muette. Cependant, "esse" appara√Æt √©galement. Il a paru plus prudent de g√©n√©rer "trop" de cas que pas assez)</li>
          </ul>
        </p>

        <p>
        <b>En conclusion,</b> les textes non-bibliques et bibliques ont bien √©t√© annot√©s (automatiquement et manuellement respecitvement) avec les entit√©s nomm√©es d√©clin√©es.
        Des probl√®mes demeurent cependant : si nous avons fait au mieux pour "coller" aux principales r√®gles, certaines r√®gles phon√©tiques ont √©t√© difficiles √† mettre en place (certaines voyelles courtes peuvent par exemple devenir des voyelles longues dans certaines conditions compliqu√©es √† mod√©liser). De m√™me, il est impossible de pr√©dire les exceptions qui peuvent exister (le quenya n'est pas compl√®tement r√©gulier, Tolkien a lui m√™me indiqu√© des exceptions).
        Enfin, si nous avons recolt√© des listes d'entit√©s de type "date" et "langage", obtenus en explorant des dictionnaires quenya, nous ne les avons pas inclues dans l'annotation par manque d'occurences dans le corpus.
        <b>Le corpus recueilli semble √™tre un des plus complets sur internet, le seul annot√© pour cette t√¢che, et pourrait donc servir pour d'autres applications linguistiques !</b>
        </p>

      <h2> Etape 3 : L'entrainement et la pipeline SpaCy </h2>

        <p>
        L'entrainement de la pipeline SpaCy est √©tudi√©e en d√©tails √† l'onglet <a href="pipeline_spacy.html">Pipepline Spacy</a>. Nous n'allons ici qu'explorer bri√®vement les diff√©rents probl√®mes que nous avons du essayer de r√©soudre.
        </p>

        <p>
        Le premier questionnement que nous avons rencontr√© est celui des embeddings √† utiliser dans la pipeline. Spacy ne dispose pas d'embeddings pour le quenya, il a donc fallu trouver une solution. Nous avons exp√©riment√© avec deux mod√®les.
        <ul>
        <li><b>Le mod√®le multilingue de SpaCy</b> : le quenya √©tant inspir√© de plusieurs langues europ√©eenes (le finnois, le latin, le grec, le vieil anglais, le gallois et le gotique ...) il pouvait faire sens d'utiliser un mod√®le global.</li>
        <li><b>Le mod√®le finnois de SpaCy</b> : plus encore que les autres langues, le finnois est mis en avant comme l'influence principale de Tolkien pour le quenya. Des emprunts direct de vocabulaires ont m√™me exist√©s jusqu'√† ce qu'il ne d√©cide de les supprimer. De plus, <a href="https://web.stanford.edu/class/archive/cs/cs224n/cs224n.1194/reports/custom/15811193.pdf">cet article</a>, qui d√©crit un traducteur anglais-quenya dispose de bon r√©sultats en s'appuyant sur un mod√®le de traduction anglais-finnois entrain√© sur le corpus europarl.</li>
        <li><b>Le mod√®le maison</b> : pour le BLSTM CRF, nous avons tent√© de faire nos propres embeddings pour le quenya en utilisant GloVe. </li>
        </ul>
        </p>
        <p>

        <p>
        Un autre probl√®me que nous avons rencontr√© lors de l'entrainement a √©t√© la question du partitionnement. Nous avons voulu appliquer une partition "classique" (70% train, 10% dev, 20% test), mais les variations dans notre corpus a rendu ce partitionnement difficile √† √©quilibrer. En d√©finitive, nous avons choisi de l'√©quilibrer bas√© sur les types de textes (√©crits par Tolkien, n√©o-quenya, traduction de la bible), en r√©partissant les quelques textes longs dans les diff√©rentes partitions.
        </p>

        <table>
            <title>R√©partition des textes dans les partitions</title>
            <tr>
                <th>Partition</th>
                <th>Nb tokens</th>
                <th>Nb textes Tolkien</th>
                <th>Nb textes Neo-quenya</th>
                <th>Nb textes Bible</th>
                <th>Nb PERSON</th>
                <th>Nb LOC</th>
            </tr>
            <tr>
                <td>Train</td>
                <td>8814</td>
                <td>16</td>
                <td>28</td>
                <td>86</td>
                <td>372</td>
                <td>152</td>
            </tr>
            <tr>
                <td>Test</td>
                <td>3249</td>
                <td>4</td>
                <td>8</td>
                <td>25</td>
                <td>62</td>
                <td>22</td>
            </tr>
            <tr>
                <td>Dev</td>
                <td>1103</td>
                <td>2</td>
                <td>4</td>
                <td>12</td>
                <td>21</td>
                <td>4</td>
        </table>

        <p>
        On peut voir notamment que les textes bibliques ont √©cras√©s les autres en termes de nombre d'entit√©s nomm√©es pr√©sentes :
        </p>
        <img src="img/train_entities.png" style="max-width: 100%; height: auto;"/>
        <center><img src="img/test_entities.png"/></center>
        <center><img src="img/dev_entities.png"/></center>
        
        <p>Enfin, comme indiqu√© plus haut, nous avons nous-m√™mes divis√© des textes longs en plus petits paragraphes pour garder une fen√™tre de contexte tout en √©vitant d'avoir une variation trop grande de longueur de textes.
          En effet, certains textes √©crits par Tolkien sont tr√®s courts (quelques mots) tandis que d'autres (comme pour la bible) sont compos√©s de plusieurs paragraphes.
        </p>
        <h2> Etape 4 : les perspectives futures </h2>

        <ul>
          <li><b>Augmentation et annotation des donn√©es :</b> au vu des r√©sultats obtenus √† partir des deux architectures test√©es, nous pensons que la piste d'am√©lioration
            la plus pertinente serait celle de l'augmentation des donn√©es. En effet, nous pensons avoir recueilli toutes les donn√©es en Quenya √©crites par Tolkien ainsi qu'une tr√®s grande partie
            des textes √©crits par des fans en n√©o-quenya. La prochaine grande √©tape serait notamment d'annoter le reste de la bible en n√©o-quenya, mais il faudrait pour √ßa beaucoup de temps ainsi qu'un annotateur 
            quenya-capable (comme P√òline üòç). Nous pourrions cependant l√† aussi faire face √† un probl√®me de non-diversit√© des sources.
            Pour contrer √ßa, la solution serait : des corpus g√©n√©r√©s par l'intelligence artificiel ! (one of those solutions might be this.)
            Mais l√† aussi, nous pourrions faire face √† un soucis d'authenticit√© et les traductions faites par les nerds seraient toujours mieux. Il serait donc aussi int√©ressant d'utiliser les traducteurs anglais-quenya
            disponibles sur internet.
          </li>
          <li><b>Pipeline Spacy : </b> concernant la pipeline Spacy, nous avons pu voir que l'utilisation des mod√®les pr√©-entrain√©s en Finnois permettaient d'obtenir dee=s r√©sultats plus que satisfaisants sur le quenya.
            En utilisant l√† encore les mod√®les et pipelines propos√©s par Spacy, nous pourrions entra√Æner nous m√™mes un Tokenizer ainsi qu'un mod√®le pour vectoriser des donn√©es en elfique. Si tr√®s int√©ressante, cette piste pourrait
            √©galement expliciter le manque de donn√©es disponibles.
        </ul>
   
        <h2> Etape ? : Qui fait quoi ? </h2>

          <p> Nous avons beaucoup travaill√© (et mang√© du houmous) dans la m√™me pi√®ce, nous avons donc particip√© √† toutes les √©tapes. Les parties analyses, recherches et r√©cup√©ration des textes ont par exemple √©t√© faits de concert. Cependant, chacune a pris en charge majoritairement certaines parties du projet.</p>
            <ul>
              <li><b>Alix</b> : BLSTM CRF</li>
              <li><b>Kehina</b> : Pipeline SpaCy</li>
              <li><b>Pawline</b> : g√©n√©ration des cas, annotation de la bible, interface (API/CSS)</li>
            </ul>
          </p>


  </div>
  </div>
</body>


</html>

